(()=>{"use strict";var e,t={170(){const e=window.wp.blocks,t=window.React,s=window.wp.i18n,i=window.wp.blockEditor,a=window.wp.components,n=window.wp.element;class l{constructor(e,t){this.container=e,this.settings={bgColor:"#f7f3e9",outlineColor:"#1a1a1a",numBlobs:5,blobSizeMin:15,blobSizeMax:35,riseSpeed:.3,wobble:5e-4,gooBlur:8,strokeWidth:3,animSpeed:1,gravity:5e-5,maxSpeed:.8,attractionForce:8e-4,explosionForce:.05,...t},this.canvas=e.querySelector("canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.canvas.width=209,this.canvas.height=708,this.blobs=[],this.animationFrameId=null,this.blockId=this.settings.blockId||"default",this.filterId=`goo-outline-${this.blockId}`,this.targetFPS=60,this.frameInterval=1e3/this.targetFPS,this.lastFrameTime=0,this.isVisible=!0,this.isPaused=!1,this.intersectionObserver=null,this.initBlobs(),this.applySettings(),this.animate=this.animate.bind(this),this.setupVisibilityObserver(),this.animate(),this.canvas.addEventListener("mousedown",e=>{const t=this.canvas.getBoundingClientRect(),s=(e.clientX-t.left)*(this.canvas.width/t.width),i=(e.clientY-t.top)*(this.canvas.height/t.height);this.explode(s,i)}))}updateSettings(e){this.settings={...this.settings,...e},"numBlobs"in e&&this.initBlobs(),this.applySettings()}setupVisibilityObserver(){"undefined"!=typeof IntersectionObserver&&(this.intersectionObserver=new IntersectionObserver(e=>{e.forEach(e=>{this.isVisible=e.isIntersecting,this.isVisible&&this.isPaused?this.resume():this.isVisible||this.isPaused||this.pause()})},{threshold:0}),this.intersectionObserver.observe(this.container))}pause(){this.isPaused||(this.isPaused=!0,this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null))}resume(){this.isPaused&&(this.isPaused=!1,this.lastFrameTime=performance.now(),this.animate())}destroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.intersectionObserver&&(this.intersectionObserver.disconnect(),this.intersectionObserver=null)}initBlobs(){this.blobs=[];const e=Math.min(this.settings.numBlobs,15);for(let t=0;t<e;t++)this.blobs.push(new o(this.settings));this.blobs.push(new r(104,490,70,40,this.settings)),this.blobs.push(new r(104,115,35,20,this.settings))}applySettings(){this.container.style.setProperty("--bg-color",this.settings.bgColor),this.container.style.setProperty("--lamp-outline",this.settings.outlineColor);const e=this.container.querySelector(`#${this.filterId} feMorphology`);e&&e.setAttribute("radius",this.settings.strokeWidth);const t=this.container.querySelector(`#${this.filterId} feGaussianBlur`);t&&t.setAttribute("stdDeviation",this.settings.gooBlur);const s=this.container.querySelector("foreignObject");if(s){const e=this.settings.blockId||"default";s.setAttribute("clip-path",`url(#glass-clip-${e})`)}this.canvas&&(this.canvas.style.filter=`url(#${this.filterId})`)}explode(e,t){e||(e=this.canvas.width/2),t||(t=this.canvas.height/2),this.blobs.forEach(s=>{if(!s.fixed){const i=s.x-e,a=s.y-t,n=Math.sqrt(i*i+a*a)||.1,l=20*this.settings.explosionForce;s.vx+=i/n*l,s.vy+=a/n*l}})}animate(e){if(this.isPaused)return;this.animationFrameId=requestAnimationFrame(this.animate),e||(e=performance.now());const t=e-this.lastFrameTime;t<this.frameInterval||(this.lastFrameTime=e-t%this.frameInterval,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.applyForces(),this.blobs.forEach(e=>{e.fixed||e.update(),e.draw(this.ctx)}))}applyForces(){for(let e=0;e<this.blobs.length;e++){if(!this.blobs[e].fixed){const t=this.settings.maxSpeed,s=Math.sqrt(this.blobs[e].vx*this.blobs[e].vx+this.blobs[e].vy*this.blobs[e].vy);s>t&&(this.blobs[e].vx=this.blobs[e].vx/s*t,this.blobs[e].vy=this.blobs[e].vy/s*t)}for(let t=e+1;t<this.blobs.length;t++){const s=this.blobs[e],i=this.blobs[t],a=i.x-s.x,n=i.y-s.y,l=Math.sqrt(a*a+n*n);if(0===l)continue;if(l<150){const e=(1-l/150)*this.settings.attractionForce*this.settings.animSpeed;s.fixed||(s.vx+=a/l*e,s.vy+=n/l*e),i.fixed||(i.vx-=a/l*e,i.vy-=n/l*e)}const o=s.r+i.r;if(l<o&&Math.sqrt((i.vx-s.vx)**2+(i.vy-s.vy)**2)>.6){const e=.02*(o-l);s.fixed||(s.vx-=a/l*e,s.vy-=n/l*e),i.fixed||(i.vx+=a/l*e,i.vy+=n/l*e)}}}}}class o{constructor(e){this.settings=e,this.reset()}reset(){const e=Math.random()>.5;this.x=104+80*(Math.random()-.5),e?(this.y=120+50*Math.random(),this.vy=.05+.1*Math.random(),this.state="falling"):(this.y=480+20*Math.random(),this.vy=-.05-Math.random()*this.settings.riseSpeed*.5,this.state="rising"),this.r=this.settings.blobSizeMin+Math.random()*(this.settings.blobSizeMax-this.settings.blobSizeMin),this.vx=.01*(Math.random()-.5),this.phase=Math.random()*Math.PI*2}update(){this.phase+=.005*this.settings.animSpeed,this.x+=(this.vx+Math.sin(this.phase)*(this.settings.wobble||5e-4))*this.settings.animSpeed,this.y+=this.vy*this.settings.animSpeed,this.vx+=1e-4*(104-this.x)*this.settings.animSpeed;const e=55+(this.y-100)/400*45,t=104-e,s=104+e;"rising"===this.state?this.y<130&&(this.y=130,this.vy=.3*Math.abs(this.vy),this.state="suspended"):"suspended"===this.state?(this.vy*=.995,Math.abs(this.vy)<.005&&(this.state=this.y<300?"falling":"rising")):"falling"===this.state&&(this.vy+=this.settings.gravity*this.settings.animSpeed,this.y>480&&(this.y=480,this.vy=.5*-Math.abs(this.vy)-.02,this.state="rising"));const i=t+10,a=s-10;this.x<i&&(this.x=i,this.vx*=-.5),this.x>a&&(this.x=a,this.vx*=-.5),this.y<120&&(this.y=120,this.vy*=-.5),this.y>480&&(this.y=480,this.vy*=-.5),this.x=Math.max(i,Math.min(a,this.x))}draw(e){e.fillStyle=this.settings.outlineColor,e.beginPath(),e.arc(this.x,this.y,this.r,0,2*Math.PI),e.fill()}}class r{constructor(e,t,s,i,a){this.x=e,this.y=t,this.rx=s,this.ry=i,this.vx=0,this.vy=0,this.r=(s+i)/2,this.fixed=!0,this.settings=a}update(){}draw(e){e.fillStyle=this.settings.outlineColor,e.beginPath(),e.ellipse(this.x,this.y,this.rx,this.ry,0,0,2*Math.PI),e.fill()}}const h=JSON.parse('{"UU":"antigravity/canvas-lava-lamp"}');(0,e.registerBlockType)(h.UU,{edit:function({attributes:e,setAttributes:o,clientId:r}){const{blockId:h,bgColor:c,outlineColor:m,numBlobs:v,blobSizeMin:p,blobSizeMax:d,riseSpeed:u,maxSpeed:b,attractionForce:g,explosionForce:f,gooBlur:y,animSpeed:C,strokeWidth:x,keepStrokeWidth:S,lampStrokeWidth:E,lampStrokeColor:k}=e,M=(0,n.useRef)(null),_=(0,n.useRef)(null);(0,n.useEffect)(()=>{h||o({blockId:r})},[r,h,o]),(0,n.useEffect)(()=>{if(M.current){if(_.current){const t={...e,blockId:r};_.current.updateSettings(t)}else{const t={...e,blockId:r};_.current=new l(M.current,t)}return()=>{}}},[e,r]),(0,n.useEffect)(()=>()=>{_.current&&(_.current.destroy(),_.current=null)},[]);const w=h||r,B=`glass-clip-${w}`,I=`goo-outline-${w}`,F={"--bg-color":c,"--lamp-outline":m,"--lamp-stroke-color":k};return(0,t.createElement)("div",{...(0,i.useBlockProps)({style:F})},(0,t.createElement)(i.InspectorControls,null,(0,t.createElement)(i.PanelColorSettings,{title:(0,s.__)("Colors","canvas-lava-lamp"),initialOpen:!0,colorSettings:[{value:c,onChange:e=>o({bgColor:e}),label:(0,s.__)("Background Color","canvas-lava-lamp"),enableAlpha:!0},{value:m,onChange:e=>o({outlineColor:e}),label:(0,s.__)("Outline Color","canvas-lava-lamp")},{value:k,onChange:e=>o({lampStrokeColor:e}),label:(0,s.__)("Lamp Body Stroke Color","canvas-lava-lamp")}]}),(0,t.createElement)(a.PanelBody,{title:(0,s.__)("Blob Settings","canvas-lava-lamp")},(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Number of Blobs","canvas-lava-lamp"),value:v,onChange:e=>o({numBlobs:e}),min:1,max:15}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Min Blob Size","canvas-lava-lamp"),value:p,onChange:e=>o({blobSizeMin:e}),min:5,max:30}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Max Blob Size","canvas-lava-lamp"),value:d,onChange:e=>o({blobSizeMax:e}),min:20,max:60})),(0,t.createElement)(a.PanelBody,{title:(0,s.__)("Physics","canvas-lava-lamp"),initialOpen:!1},(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Rise Speed","canvas-lava-lamp"),value:u,onChange:e=>o({riseSpeed:e}),min:.05,max:1,step:.05}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Max Speed","canvas-lava-lamp"),value:b,onChange:e=>o({maxSpeed:e}),min:.1,max:3,step:.1}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Attraction Force","canvas-lava-lamp"),value:g,onChange:e=>o({attractionForce:e}),min:0,max:.005,step:1e-4}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Explosion Force","canvas-lava-lamp"),value:f,onChange:e=>o({explosionForce:e}),min:.01,max:.5,step:.01})),(0,t.createElement)(a.PanelBody,{title:(0,s.__)("Visuals","canvas-lava-lamp"),initialOpen:!1},(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Goo Blur","canvas-lava-lamp"),value:y,onChange:e=>o({gooBlur:e}),min:0,max:20}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Animation Speed","canvas-lava-lamp"),value:C,onChange:e=>o({animSpeed:e}),min:.05,max:3,step:.05}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Stroke Width","canvas-lava-lamp"),value:x,onChange:e=>o({strokeWidth:e}),min:1,max:8}),(0,t.createElement)(a.ToggleControl,{label:(0,s.__)("Keep Stroke Width on Rescale","canvas-lava-lamp"),checked:S,onChange:e=>o({keepStrokeWidth:e})}),(0,t.createElement)(a.RangeControl,{label:(0,s.__)("Lamp Body Stroke Width","canvas-lava-lamp"),value:E,onChange:e=>o({lampStrokeWidth:e}),min:.5,max:10,step:.5}))),(0,t.createElement)("div",{className:"lamp-container",ref:M},(0,t.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,t.createElement)("defs",null,(0,t.createElement)("filter",{id:I},(0,t.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,t.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,t.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,t.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,t.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,t.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,t.createElement)("clipPath",{id:B},(0,t.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,t.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${B})`},(0,t.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${I})`}})),(0,t.createElement)("path",{className:"outline",style:{stroke:k,strokeWidth:E,vectorEffect:S?"non-scaling-stroke":"none"},d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"}))))},save:function({attributes:e}){const{blockId:s,bgColor:a,outlineColor:n,keepStrokeWidth:l,lampStrokeWidth:o,lampStrokeColor:r}=e,h=s||"default",c=`glass-clip-${h}`,m=`goo-outline-${h}`,v={"--bg-color":a,"--lamp-outline":n,"--lamp-stroke-color":r};return(0,t.createElement)("div",{...i.useBlockProps.save({style:v}),"data-block-id":h},(0,t.createElement)("div",{className:"lamp-container"},(0,t.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,t.createElement)("defs",null,(0,t.createElement)("filter",{id:m},(0,t.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,t.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,t.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,t.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,t.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,t.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,t.createElement)("clipPath",{id:c},(0,t.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,t.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${c})`},(0,t.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${m})`}})),(0,t.createElement)("path",{className:"outline",style:{stroke:r,strokeWidth:o,vectorEffect:l?"non-scaling-stroke":"none"},d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5H158.032M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"})),(0,t.createElement)("script",{type:"application/json",className:"lava-lamp-data",dangerouslySetInnerHTML:{__html:JSON.stringify(e)}})))}})}},s={};function i(e){var a=s[e];if(void 0!==a)return a.exports;var n=s[e]={exports:{}};return t[e](n,n.exports,i),n.exports}i.m=t,e=[],i.O=(t,s,a,n)=>{if(!s){var l=1/0;for(c=0;c<e.length;c++){for(var[s,a,n]=e[c],o=!0,r=0;r<s.length;r++)(!1&n||l>=n)&&Object.keys(i.O).every(e=>i.O[e](s[r]))?s.splice(r--,1):(o=!1,n<l&&(l=n));if(o){e.splice(c--,1);var h=a();void 0!==h&&(t=h)}}return t}n=n||0;for(var c=e.length;c>0&&e[c-1][2]>n;c--)e[c]=e[c-1];e[c]=[s,a,n]},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};i.O.j=t=>0===e[t];var t=(t,s)=>{var a,n,[l,o,r]=s,h=0;if(l.some(t=>0!==e[t])){for(a in o)i.o(o,a)&&(i.m[a]=o[a]);if(r)var c=r(i)}for(t&&t(s);h<l.length;h++)n=l[h],i.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return i.O(c)},s=globalThis.webpackChunkcanvas_lava_lamp_block=globalThis.webpackChunkcanvas_lava_lamp_block||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))})();var a=i.O(void 0,[350],()=>i(170));a=i.O(a)})();