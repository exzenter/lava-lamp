(()=>{"use strict";var t,e={170(){const t=window.wp.blocks,e=window.React,i=window.wp.i18n,s=window.wp.blockEditor,a=window.wp.components,n=window.wp.element;class l{constructor(t,e){this.container=t,this.settings={bgColor:"#f7f3e9",outlineColor:"#1a1a1a",numBlobs:5,blobSizeMin:15,blobSizeMax:35,riseSpeed:.3,wobble:5e-4,gooBlur:8,strokeWidth:3,animSpeed:1,gravity:5e-5,maxSpeed:.8,attractionForce:8e-4,explosionForce:.05,...e},this.canvas=t.querySelector("canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.canvas.width=209,this.canvas.height=708,this.blobs=[],this.animationFrameId=null,this.blockId=this.settings.blockId||"default",this.filterId=`goo-outline-${this.blockId}`,this.initBlobs(),this.applySettings(),this.animate=this.animate.bind(this),this.animate(),this.canvas.addEventListener("mousedown",t=>{const e=this.canvas.getBoundingClientRect(),i=(t.clientX-e.left)*(this.canvas.width/e.width),s=(t.clientY-e.top)*(this.canvas.height/e.height);this.explode(i,s)}))}updateSettings(t){this.settings={...this.settings,...t},"numBlobs"in t&&this.initBlobs(),this.applySettings()}destroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}initBlobs(){this.blobs=[];const t=Math.min(this.settings.numBlobs,15);for(let e=0;e<t;e++)this.blobs.push(new o(this.settings));this.blobs.push(new r(104,490,70,40,this.settings)),this.blobs.push(new r(104,115,35,20,this.settings))}applySettings(){this.container.style.setProperty("--bg-color",this.settings.bgColor),this.container.style.setProperty("--lamp-outline",this.settings.outlineColor);const t=this.container.querySelector(`#${this.filterId} feMorphology`);t&&t.setAttribute("radius",this.settings.strokeWidth);const e=this.container.querySelector(`#${this.filterId} feGaussianBlur`);e&&e.setAttribute("stdDeviation",this.settings.gooBlur);const i=this.container.querySelector("foreignObject");if(i){const t=this.settings.blockId||"default";i.setAttribute("clip-path",`url(#glass-clip-${t})`)}this.canvas&&(this.canvas.style.filter=`url(#${this.filterId})`)}explode(t,e){t||(t=this.canvas.width/2),e||(e=this.canvas.height/2),this.blobs.forEach(i=>{if(!i.fixed){const s=i.x-t,a=i.y-e,n=Math.sqrt(s*s+a*a)||.1,l=20*this.settings.explosionForce;i.vx+=s/n*l,i.vy+=a/n*l}})}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.applyForces(),this.blobs.forEach(t=>{t.fixed||t.update(),t.draw(this.ctx)}),this.animationFrameId=requestAnimationFrame(this.animate)}applyForces(){for(let t=0;t<this.blobs.length;t++){if(!this.blobs[t].fixed){const e=this.settings.maxSpeed,i=Math.sqrt(this.blobs[t].vx*this.blobs[t].vx+this.blobs[t].vy*this.blobs[t].vy);i>e&&(this.blobs[t].vx=this.blobs[t].vx/i*e,this.blobs[t].vy=this.blobs[t].vy/i*e)}for(let e=t+1;e<this.blobs.length;e++){const i=this.blobs[t],s=this.blobs[e],a=s.x-i.x,n=s.y-i.y,l=Math.sqrt(a*a+n*n);if(0===l)continue;if(l<150){const t=(1-l/150)*this.settings.attractionForce*this.settings.animSpeed;i.fixed||(i.vx+=a/l*t,i.vy+=n/l*t),s.fixed||(s.vx-=a/l*t,s.vy-=n/l*t)}const o=i.r+s.r;if(l<o&&Math.sqrt((s.vx-i.vx)**2+(s.vy-i.vy)**2)>.6){const t=.02*(o-l);i.fixed||(i.vx-=a/l*t,i.vy-=n/l*t),s.fixed||(s.vx+=a/l*t,s.vy+=n/l*t)}}}}}class o{constructor(t){this.settings=t,this.reset()}reset(){const t=Math.random()>.5;this.x=104+80*(Math.random()-.5),t?(this.y=120+50*Math.random(),this.vy=.05+.1*Math.random(),this.state="falling"):(this.y=480+20*Math.random(),this.vy=-.05-Math.random()*this.settings.riseSpeed*.5,this.state="rising"),this.r=this.settings.blobSizeMin+Math.random()*(this.settings.blobSizeMax-this.settings.blobSizeMin),this.vx=.01*(Math.random()-.5),this.phase=Math.random()*Math.PI*2}update(){this.phase+=.005*this.settings.animSpeed,this.x+=(this.vx+Math.sin(this.phase)*(this.settings.wobble||5e-4))*this.settings.animSpeed,this.y+=this.vy*this.settings.animSpeed,this.vx+=1e-4*(104-this.x)*this.settings.animSpeed;const t=55+(this.y-100)/400*45,e=104-t,i=104+t;"rising"===this.state?this.y<130&&(this.y=130,this.vy=.3*Math.abs(this.vy),this.state="suspended"):"suspended"===this.state?(this.vy*=.995,Math.abs(this.vy)<.005&&(this.state=this.y<300?"falling":"rising")):"falling"===this.state&&(this.vy+=this.settings.gravity*this.settings.animSpeed,this.y>480&&(this.y=480,this.vy=.5*-Math.abs(this.vy)-.02,this.state="rising"));const s=e+10,a=i-10;this.x<s&&(this.x=s,this.vx*=-.5),this.x>a&&(this.x=a,this.vx*=-.5),this.y<120&&(this.y=120,this.vy*=-.5),this.y>480&&(this.y=480,this.vy*=-.5),this.x=Math.max(s,Math.min(a,this.x))}draw(t){t.fillStyle=this.settings.outlineColor,t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.fill()}}class r{constructor(t,e,i,s,a){this.x=t,this.y=e,this.rx=i,this.ry=s,this.vx=0,this.vy=0,this.r=(i+s)/2,this.fixed=!0,this.settings=a}update(){}draw(t){t.fillStyle=this.settings.outlineColor,t.beginPath(),t.ellipse(this.x,this.y,this.rx,this.ry,0,0,2*Math.PI),t.fill()}}const h=JSON.parse('{"UU":"antigravity/canvas-lava-lamp"}');(0,t.registerBlockType)(h.UU,{edit:function({attributes:t,setAttributes:o,clientId:r}){const{blockId:h,bgColor:c,outlineColor:m,numBlobs:v,blobSizeMin:p,blobSizeMax:d,riseSpeed:u,maxSpeed:b,attractionForce:g,explosionForce:f,gooBlur:y,animSpeed:x,strokeWidth:C,keepStrokeWidth:E}=t,M=(0,n.useRef)(null),S=(0,n.useRef)(null);(0,n.useEffect)(()=>{h||o({blockId:r})},[r,h,o]),(0,n.useEffect)(()=>{if(M.current){if(S.current){const e={...t,blockId:r};S.current.updateSettings(e)}else{const e={...t,blockId:r};S.current=new l(M.current,e)}return()=>{}}},[t,r]),(0,n.useEffect)(()=>()=>{S.current&&(S.current.destroy(),S.current=null)},[]);const k=h||r,_=`glass-clip-${k}`,w=`goo-outline-${k}`,B={"--bg-color":c,"--lamp-outline":m};return(0,e.createElement)("div",{...(0,s.useBlockProps)({style:B})},(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(s.PanelColorSettings,{title:(0,i.__)("Colors","canvas-lava-lamp"),initialOpen:!0,colorSettings:[{value:c,onChange:t=>o({bgColor:t}),label:(0,i.__)("Background Color","canvas-lava-lamp"),enableAlpha:!0},{value:m,onChange:t=>o({outlineColor:t}),label:(0,i.__)("Outline Color","canvas-lava-lamp")}]}),(0,e.createElement)(a.PanelBody,{title:(0,i.__)("Blob Settings","canvas-lava-lamp")},(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Number of Blobs","canvas-lava-lamp"),value:v,onChange:t=>o({numBlobs:t}),min:1,max:15}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Min Blob Size","canvas-lava-lamp"),value:p,onChange:t=>o({blobSizeMin:t}),min:5,max:30}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Max Blob Size","canvas-lava-lamp"),value:d,onChange:t=>o({blobSizeMax:t}),min:20,max:60})),(0,e.createElement)(a.PanelBody,{title:(0,i.__)("Physics","canvas-lava-lamp"),initialOpen:!1},(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Rise Speed","canvas-lava-lamp"),value:u,onChange:t=>o({riseSpeed:t}),min:.05,max:1,step:.05}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Max Speed","canvas-lava-lamp"),value:b,onChange:t=>o({maxSpeed:t}),min:.1,max:3,step:.1}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Attraction Force","canvas-lava-lamp"),value:g,onChange:t=>o({attractionForce:t}),min:0,max:.005,step:1e-4}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Explosion Force","canvas-lava-lamp"),value:f,onChange:t=>o({explosionForce:t}),min:.01,max:.5,step:.01})),(0,e.createElement)(a.PanelBody,{title:(0,i.__)("Visuals","canvas-lava-lamp"),initialOpen:!1},(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Goo Blur","canvas-lava-lamp"),value:y,onChange:t=>o({gooBlur:t}),min:0,max:20}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Animation Speed","canvas-lava-lamp"),value:x,onChange:t=>o({animSpeed:t}),min:.05,max:3,step:.05}),(0,e.createElement)(a.RangeControl,{label:(0,i.__)("Stroke Width","canvas-lava-lamp"),value:C,onChange:t=>o({strokeWidth:t}),min:1,max:8}),(0,e.createElement)(a.ToggleControl,{label:(0,i.__)("Keep Stroke Width on Rescale","canvas-lava-lamp"),checked:E,onChange:t=>o({keepStrokeWidth:t})}))),(0,e.createElement)("div",{className:"lamp-container",ref:M},(0,e.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,e.createElement)("defs",null,(0,e.createElement)("filter",{id:w},(0,e.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,e.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,e.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,e.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,e.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,e.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,e.createElement)("clipPath",{id:_},(0,e.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,e.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${_})`},(0,e.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${w})`}})),(0,e.createElement)("path",{className:"outline",d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"}))))},save:function({attributes:t}){const{blockId:i,bgColor:a,outlineColor:n,keepStrokeWidth:l}=t,o=i||"default",r=`glass-clip-${o}`,h=`goo-outline-${o}`,c={"--bg-color":a,"--lamp-outline":n};return(0,e.createElement)("div",{...s.useBlockProps.save({style:c}),"data-block-id":o},(0,e.createElement)("div",{className:"lamp-container"},(0,e.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,e.createElement)("defs",null,(0,e.createElement)("filter",{id:h},(0,e.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,e.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,e.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,e.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,e.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,e.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,e.createElement)("clipPath",{id:r},(0,e.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,e.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${r})`},(0,e.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${h})`}})),(0,e.createElement)("path",{className:"outline",style:{vectorEffect:l?"non-scaling-stroke":"none"},d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5H158.032M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"})),(0,e.createElement)("script",{type:"application/json",className:"lava-lamp-data",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}})))}})}},i={};function s(t){var a=i[t];if(void 0!==a)return a.exports;var n=i[t]={exports:{}};return e[t](n,n.exports,s),n.exports}s.m=e,t=[],s.O=(e,i,a,n)=>{if(!i){var l=1/0;for(c=0;c<t.length;c++){for(var[i,a,n]=t[c],o=!0,r=0;r<i.length;r++)(!1&n||l>=n)&&Object.keys(s.O).every(t=>s.O[t](i[r]))?i.splice(r--,1):(o=!1,n<l&&(l=n));if(o){t.splice(c--,1);var h=a();void 0!==h&&(e=h)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[i,a,n]},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={57:0,350:0};s.O.j=e=>0===t[e];var e=(e,i)=>{var a,n,[l,o,r]=i,h=0;if(l.some(e=>0!==t[e])){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(r)var c=r(s)}for(e&&e(i);h<l.length;h++)n=l[h],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(c)},i=globalThis.webpackChunkcanvas_lava_lamp_block=globalThis.webpackChunkcanvas_lava_lamp_block||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var a=s.O(void 0,[350],()=>s(170));a=s.O(a)})();