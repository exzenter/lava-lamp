(()=>{"use strict";var t,e={170(){const t=window.wp.blocks,e=window.React,a=window.wp.i18n,s=window.wp.blockEditor,i=window.wp.components,l=window.wp.element;class n{constructor(t,e){this.container=t,this.settings={bgColor:"#f7f3e9",outlineColor:"#1a1a1a",numBlobs:5,blobSizeMin:15,blobSizeMax:35,riseSpeed:.3,wobble:5e-4,gooBlur:8,strokeWidth:3,animSpeed:1,gravity:5e-5,maxSpeed:.8,attractionForce:8e-4,explosionForce:.05,...e},this.canvas=t.querySelector("canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.canvas.width=209,this.canvas.height=708,this.blobs=[],this.animationFrameId=null,this.blockId=this.settings.blockId||"default",this.filterId=`goo-outline-${this.blockId}`,this.initBlobs(),this.applySettings(),this.animate=this.animate.bind(this),this.animate(),this.canvas.addEventListener("mousedown",t=>{const e=this.canvas.getBoundingClientRect(),a=(t.clientX-e.left)*(this.canvas.width/e.width),s=(t.clientY-e.top)*(this.canvas.height/e.height);this.explode(a,s)}))}updateSettings(t){this.settings={...this.settings,...t},"numBlobs"in t&&this.initBlobs(),this.applySettings()}destroy(){this.animationFrameId&&cancelAnimationFrame(this.animationFrameId)}initBlobs(){this.blobs=[];const t=Math.min(this.settings.numBlobs,15);for(let e=0;e<t;e++)this.blobs.push(new o(this.settings));this.blobs.push(new r(104,490,70,40,this.settings)),this.blobs.push(new r(104,115,35,20,this.settings))}applySettings(){this.container.style.setProperty("--bg-color",this.settings.bgColor),this.container.style.setProperty("--lamp-outline",this.settings.outlineColor);const t=this.container.querySelector(`#${this.filterId} feMorphology`);t&&t.setAttribute("radius",this.settings.strokeWidth);const e=this.container.querySelector(`#${this.filterId} feGaussianBlur`);e&&e.setAttribute("stdDeviation",this.settings.gooBlur);const a=this.container.querySelector("foreignObject");if(a){const t=this.settings.blockId||"default";a.setAttribute("clip-path",`url(#glass-clip-${t})`)}this.canvas&&(this.canvas.style.filter=`url(#${this.filterId})`)}explode(t,e){t||(t=this.canvas.width/2),e||(e=this.canvas.height/2),this.blobs.forEach(a=>{if(!a.fixed){const s=a.x-t,i=a.y-e,l=Math.sqrt(s*s+i*i)||.1,n=20*this.settings.explosionForce;a.vx+=s/l*n,a.vy+=i/l*n}})}animate(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.applyForces(),this.blobs.forEach(t=>{t.fixed||t.update(),t.draw(this.ctx)}),this.animationFrameId=requestAnimationFrame(this.animate)}applyForces(){for(let t=0;t<this.blobs.length;t++){if(!this.blobs[t].fixed){const e=this.settings.maxSpeed,a=Math.sqrt(this.blobs[t].vx*this.blobs[t].vx+this.blobs[t].vy*this.blobs[t].vy);a>e&&(this.blobs[t].vx=this.blobs[t].vx/a*e,this.blobs[t].vy=this.blobs[t].vy/a*e)}for(let e=t+1;e<this.blobs.length;e++){const a=this.blobs[t],s=this.blobs[e],i=s.x-a.x,l=s.y-a.y,n=Math.sqrt(i*i+l*l);if(0===n)continue;if(n<150){const t=(1-n/150)*this.settings.attractionForce*this.settings.animSpeed;a.fixed||(a.vx+=i/n*t,a.vy+=l/n*t),s.fixed||(s.vx-=i/n*t,s.vy-=l/n*t)}const o=a.r+s.r;if(n<o&&Math.sqrt((s.vx-a.vx)**2+(s.vy-a.vy)**2)>.6){const t=.02*(o-n);a.fixed||(a.vx-=i/n*t,a.vy-=l/n*t),s.fixed||(s.vx+=i/n*t,s.vy+=l/n*t)}}}}}class o{constructor(t){this.settings=t,this.reset()}reset(){const t=Math.random()>.5;this.x=104+80*(Math.random()-.5),t?(this.y=120+50*Math.random(),this.vy=.05+.1*Math.random(),this.state="falling"):(this.y=480+20*Math.random(),this.vy=-.05-Math.random()*this.settings.riseSpeed*.5,this.state="rising"),this.r=this.settings.blobSizeMin+Math.random()*(this.settings.blobSizeMax-this.settings.blobSizeMin),this.vx=.01*(Math.random()-.5),this.phase=Math.random()*Math.PI*2}update(){this.phase+=.005*this.settings.animSpeed,this.x+=(this.vx+Math.sin(this.phase)*(this.settings.wobble||5e-4))*this.settings.animSpeed,this.y+=this.vy*this.settings.animSpeed,this.vx+=1e-4*(104-this.x)*this.settings.animSpeed;const t=55+(this.y-100)/400*45,e=104-t,a=104+t;"rising"===this.state?this.y<130&&(this.y=130,this.vy=.3*Math.abs(this.vy),this.state="suspended"):"suspended"===this.state?(this.vy*=.995,Math.abs(this.vy)<.005&&(this.state=this.y<300?"falling":"rising")):"falling"===this.state&&(this.vy+=this.settings.gravity*this.settings.animSpeed,this.y>480&&(this.y=480,this.vy=.5*-Math.abs(this.vy)-.02,this.state="rising"));const s=e+10,i=a-10;this.x<s&&(this.x=s,this.vx*=-.5),this.x>i&&(this.x=i,this.vx*=-.5),this.y<120&&(this.y=120,this.vy*=-.5),this.y>480&&(this.y=480,this.vy*=-.5),this.x=Math.max(s,Math.min(i,this.x))}draw(t){t.fillStyle=this.settings.outlineColor,t.beginPath(),t.arc(this.x,this.y,this.r,0,2*Math.PI),t.fill()}}class r{constructor(t,e,a,s,i){this.x=t,this.y=e,this.rx=a,this.ry=s,this.vx=0,this.vy=0,this.r=(a+s)/2,this.fixed=!0,this.settings=i}update(){}draw(t){t.fillStyle=this.settings.outlineColor,t.beginPath(),t.ellipse(this.x,this.y,this.rx,this.ry,0,0,2*Math.PI),t.fill()}}const h=JSON.parse('{"UU":"antigravity/canvas-lava-lamp"}');(0,t.registerBlockType)(h.UU,{edit:function({attributes:t,setAttributes:o,clientId:r}){const{blockId:h,bgColor:c,outlineColor:m,numBlobs:p,blobSizeMin:v,blobSizeMax:d,riseSpeed:u,maxSpeed:b,attractionForce:g,explosionForce:f,gooBlur:y,animSpeed:C,strokeWidth:x,keepStrokeWidth:S,lampStrokeWidth:E,lampStrokeColor:k}=t,M=(0,l.useRef)(null),_=(0,l.useRef)(null);(0,l.useEffect)(()=>{h||o({blockId:r})},[r,h,o]),(0,l.useEffect)(()=>{if(M.current){if(_.current){const e={...t,blockId:r};_.current.updateSettings(e)}else{const e={...t,blockId:r};_.current=new n(M.current,e)}return()=>{}}},[t,r]),(0,l.useEffect)(()=>()=>{_.current&&(_.current.destroy(),_.current=null)},[]);const w=h||r,B=`glass-clip-${w}`,L=`goo-outline-${w}`,I={"--bg-color":c,"--lamp-outline":m,"--lamp-stroke-color":k};return(0,e.createElement)("div",{...(0,s.useBlockProps)({style:I})},(0,e.createElement)(s.InspectorControls,null,(0,e.createElement)(s.PanelColorSettings,{title:(0,a.__)("Colors","canvas-lava-lamp"),initialOpen:!0,colorSettings:[{value:c,onChange:t=>o({bgColor:t}),label:(0,a.__)("Background Color","canvas-lava-lamp"),enableAlpha:!0},{value:m,onChange:t=>o({outlineColor:t}),label:(0,a.__)("Outline Color","canvas-lava-lamp")},{value:k,onChange:t=>o({lampStrokeColor:t}),label:(0,a.__)("Lamp Body Stroke Color","canvas-lava-lamp")}]}),(0,e.createElement)(i.PanelBody,{title:(0,a.__)("Blob Settings","canvas-lava-lamp")},(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Number of Blobs","canvas-lava-lamp"),value:p,onChange:t=>o({numBlobs:t}),min:1,max:15}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Min Blob Size","canvas-lava-lamp"),value:v,onChange:t=>o({blobSizeMin:t}),min:5,max:30}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Max Blob Size","canvas-lava-lamp"),value:d,onChange:t=>o({blobSizeMax:t}),min:20,max:60})),(0,e.createElement)(i.PanelBody,{title:(0,a.__)("Physics","canvas-lava-lamp"),initialOpen:!1},(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Rise Speed","canvas-lava-lamp"),value:u,onChange:t=>o({riseSpeed:t}),min:.05,max:1,step:.05}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Max Speed","canvas-lava-lamp"),value:b,onChange:t=>o({maxSpeed:t}),min:.1,max:3,step:.1}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Attraction Force","canvas-lava-lamp"),value:g,onChange:t=>o({attractionForce:t}),min:0,max:.005,step:1e-4}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Explosion Force","canvas-lava-lamp"),value:f,onChange:t=>o({explosionForce:t}),min:.01,max:.5,step:.01})),(0,e.createElement)(i.PanelBody,{title:(0,a.__)("Visuals","canvas-lava-lamp"),initialOpen:!1},(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Goo Blur","canvas-lava-lamp"),value:y,onChange:t=>o({gooBlur:t}),min:0,max:20}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Animation Speed","canvas-lava-lamp"),value:C,onChange:t=>o({animSpeed:t}),min:.05,max:3,step:.05}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Stroke Width","canvas-lava-lamp"),value:x,onChange:t=>o({strokeWidth:t}),min:1,max:8}),(0,e.createElement)(i.ToggleControl,{label:(0,a.__)("Keep Stroke Width on Rescale","canvas-lava-lamp"),checked:S,onChange:t=>o({keepStrokeWidth:t})}),(0,e.createElement)(i.RangeControl,{label:(0,a.__)("Lamp Body Stroke Width","canvas-lava-lamp"),value:E,onChange:t=>o({lampStrokeWidth:t}),min:.5,max:10,step:.5}))),(0,e.createElement)("div",{className:"lamp-container",ref:M},(0,e.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,e.createElement)("defs",null,(0,e.createElement)("filter",{id:L},(0,e.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,e.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,e.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,e.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,e.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,e.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,e.createElement)("clipPath",{id:B},(0,e.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,e.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${B})`},(0,e.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${L})`}})),(0,e.createElement)("path",{className:"outline",style:{stroke:k,strokeWidth:E,vectorEffect:S?"non-scaling-stroke":"none"},d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"}))))},save:function({attributes:t}){const{blockId:a,bgColor:i,outlineColor:l,keepStrokeWidth:n,lampStrokeWidth:o,lampStrokeColor:r}=t,h=a||"default",c=`glass-clip-${h}`,m=`goo-outline-${h}`,p={"--bg-color":i,"--lamp-outline":l,"--lamp-stroke-color":r};return(0,e.createElement)("div",{...s.useBlockProps.save({style:p}),"data-block-id":h},(0,e.createElement)("div",{className:"lamp-container"},(0,e.createElement)("svg",{viewBox:"-2 -2 213 712",preserveAspectRatio:"xMidYMid meet",className:"lamp-overlay"},(0,e.createElement)("defs",null,(0,e.createElement)("filter",{id:m},(0,e.createElement)("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"8",result:"blur"}),(0,e.createElement)("feColorMatrix",{in:"blur",mode:"matrix",values:"1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -7",result:"goo"}),(0,e.createElement)("feMorphology",{in:"goo",operator:"dilate",radius:"3",result:"thick"}),(0,e.createElement)("feComposite",{in:"thick",in2:"goo",operator:"out",result:"stroke"}),(0,e.createElement)("feFlood",{floodColor:"var(--lamp-outline)",result:"color"}),(0,e.createElement)("feComposite",{in:"color",in2:"stroke",operator:"in"})),(0,e.createElement)("clipPath",{id:c},(0,e.createElement)("path",{d:"M51 98.5 \r L7.0 382.5 \r C7.0 382.5 3.0 406 5.0 421.5 \r C7.0 437 13.0 455.5 13.0 455.5 \r L31.5 502 \r Q104.25 506 175.0 502\r C183.5 480 201.5 446 203.5 421.5\r C205.5 397 197.0 357 197.0 357\r L156.5 98.5 \r Z"}))),(0,e.createElement)("foreignObject",{x:"0",y:"0",width:"209",height:"708",clipPath:`url(#${c})`},(0,e.createElement)("canvas",{className:"lava-canvas",style:{width:"100%",height:"100%",filter:`url(#${m})`}})),(0,e.createElement)("path",{className:"outline",style:{stroke:r,strokeWidth:o,vectorEffect:n?"non-scaling-stroke":"none"},d:"M49.5599 98.5L65.0599 3H143.06L158.032 98.5M49.5599 98.5H158.032M49.5599 98.5L5.55989 382.5C5.55989 382.5 1.55985 406 3.55987 421.5C5.55989 437 11.5599 455.5 11.5599 455.5L30.0599 503.5M158.032 98.5L198.56 357C198.56 357 207.06 397 205.06 421.5C203.06 446 154.06 542 158.06 565.5C162.06 589 198.06 697 198.06 697C198.06 697 154.56 704.5 101.06 704.5C47.5599 704.5 10.0599 696.5 10.0599 696.5L48.5599 581C48.5599 581 50.0599 571.5 50.0599 565.5C50.0599 559.5 48.5599 551.5 48.5599 551.5L30.0599 503.5M30.0599 503.5C30.0599 503.5 81.0599 505.5 104.56 505.5C128.06 505.5 176.56 503.5 176.56 503.5"})),(0,e.createElement)("script",{type:"application/json",className:"lava-lamp-data",dangerouslySetInnerHTML:{__html:JSON.stringify(t)}})))}})}},a={};function s(t){var i=a[t];if(void 0!==i)return i.exports;var l=a[t]={exports:{}};return e[t](l,l.exports,s),l.exports}s.m=e,t=[],s.O=(e,a,i,l)=>{if(!a){var n=1/0;for(c=0;c<t.length;c++){for(var[a,i,l]=t[c],o=!0,r=0;r<a.length;r++)(!1&l||n>=l)&&Object.keys(s.O).every(t=>s.O[t](a[r]))?a.splice(r--,1):(o=!1,l<n&&(n=l));if(o){t.splice(c--,1);var h=i();void 0!==h&&(e=h)}}return e}l=l||0;for(var c=t.length;c>0&&t[c-1][2]>l;c--)t[c]=t[c-1];t[c]=[a,i,l]},s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t={57:0,350:0};s.O.j=e=>0===t[e];var e=(e,a)=>{var i,l,[n,o,r]=a,h=0;if(n.some(e=>0!==t[e])){for(i in o)s.o(o,i)&&(s.m[i]=o[i]);if(r)var c=r(s)}for(e&&e(a);h<n.length;h++)l=n[h],s.o(t,l)&&t[l]&&t[l][0](),t[l]=0;return s.O(c)},a=globalThis.webpackChunkcanvas_lava_lamp_block=globalThis.webpackChunkcanvas_lava_lamp_block||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))})();var i=s.O(void 0,[350],()=>s(170));i=s.O(i)})();